{% extends 'base_lk.html' %}

{% block Header %}
	{% include '/headers/profile.html' %}
{% endblock %}

{% block Body %}
<section class="main-section">
    <div class="container">
        <form class="main-inner" enctype="multipart/form-data" method="POST">
            {{ form.hidden_tag() }}
            <div class="title date-title">
                Заявка на ремонт
                <div class="date">
                    <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 8.625C11.385 8.625 10.875 8.115 10.875 7.5V3C10.875 2.385 11.385 1.875 12 1.875C12.615 1.875 13.125 2.385 13.125 3V7.5C13.125 8.115 12.615 8.625 12 8.625Z" fill="#002FD3"/>
                        <path d="M24 8.625C23.385 8.625 22.875 8.115 22.875 7.5V3C22.875 2.385 23.385 1.875 24 1.875C24.615 1.875 25.125 2.385 25.125 3V7.5C25.125 8.115 24.615 8.625 24 8.625Z" fill="#002FD3"/>
                        <path d="M12.75 21.7495C12.555 21.7495 12.36 21.7045 12.18 21.6295C11.985 21.5545 11.835 21.4495 11.685 21.3145C11.415 21.0295 11.25 20.6545 11.25 20.2495C11.25 20.0545 11.295 19.8595 11.37 19.6795C11.445 19.4995 11.55 19.3345 11.685 19.1845C11.835 19.0495 11.985 18.9445 12.18 18.8695C12.72 18.6445 13.395 18.7645 13.815 19.1845C14.085 19.4695 14.25 19.8595 14.25 20.2495C14.25 20.3395 14.235 20.4445 14.22 20.5495C14.205 20.6395 14.175 20.7295 14.13 20.8195C14.1 20.9095 14.055 20.9995 13.995 21.0895C13.95 21.1645 13.875 21.2395 13.815 21.3145C13.53 21.5845 13.14 21.7495 12.75 21.7495Z" fill="#002FD3"/>
                        <path d="M18 21.7498C17.805 21.7498 17.61 21.7048 17.43 21.6298C17.235 21.5548 17.085 21.4498 16.935 21.3148C16.665 21.0298 16.5 20.6548 16.5 20.2498C16.5 20.0548 16.545 19.8598 16.62 19.6798C16.695 19.4998 16.8 19.3348 16.935 19.1848C17.085 19.0498 17.235 18.9448 17.43 18.8698C17.97 18.6298 18.645 18.7648 19.065 19.1848C19.335 19.4698 19.5 19.8598 19.5 20.2498C19.5 20.3398 19.485 20.4448 19.47 20.5498C19.455 20.6398 19.425 20.7298 19.38 20.8198C19.35 20.9098 19.305 20.9998 19.245 21.0898C19.2 21.1648 19.125 21.2398 19.065 21.3148C18.78 21.5848 18.39 21.7498 18 21.7498Z" fill="#002FD3"/>
                        <path d="M23.25 21.7498C23.055 21.7498 22.86 21.7048 22.68 21.6298C22.485 21.5548 22.335 21.4498 22.185 21.3148C22.125 21.2398 22.065 21.1648 22.005 21.0898C21.945 20.9998 21.9 20.9098 21.87 20.8198C21.825 20.7298 21.795 20.6398 21.78 20.5498C21.765 20.4448 21.75 20.3398 21.75 20.2498C21.75 19.8598 21.915 19.4698 22.185 19.1848C22.335 19.0498 22.485 18.9448 22.68 18.8698C23.235 18.6298 23.895 18.7648 24.315 19.1848C24.585 19.4698 24.75 19.8598 24.75 20.2498C24.75 20.3398 24.735 20.4448 24.72 20.5498C24.705 20.6398 24.675 20.7298 24.63 20.8198C24.6 20.9098 24.555 20.9998 24.495 21.0898C24.45 21.1648 24.375 21.2398 24.315 21.3148C24.03 21.5848 23.64 21.7498 23.25 21.7498Z" fill="#002FD3"/>
                        <path d="M12.75 27.0003C12.555 27.0003 12.36 26.9553 12.18 26.8803C12 26.8053 11.835 26.7003 11.685 26.5653C11.415 26.2803 11.25 25.8903 11.25 25.5003C11.25 25.3053 11.295 25.1103 11.37 24.9303C11.445 24.7353 11.55 24.5703 11.685 24.4353C12.24 23.8803 13.26 23.8803 13.815 24.4353C14.085 24.7203 14.25 25.1103 14.25 25.5003C14.25 25.8903 14.085 26.2803 13.815 26.5653C13.53 26.8353 13.14 27.0003 12.75 27.0003Z" fill="#002FD3"/>
                        <path d="M18 27.0003C17.61 27.0003 17.22 26.8353 16.935 26.5653C16.665 26.2803 16.5 25.8903 16.5 25.5003C16.5 25.3053 16.545 25.1103 16.62 24.9303C16.695 24.7353 16.8 24.5703 16.935 24.4353C17.49 23.8803 18.51 23.8803 19.065 24.4353C19.2 24.5703 19.305 24.7353 19.38 24.9303C19.455 25.1103 19.5 25.3053 19.5 25.5003C19.5 25.8903 19.335 26.2803 19.065 26.5653C18.78 26.8353 18.39 27.0003 18 27.0003Z" fill="#002FD3"/>
                        <path d="M23.25 26.9999C22.86 26.9999 22.47 26.8349 22.185 26.5649C22.05 26.4299 21.945 26.2649 21.87 26.0699C21.795 25.8899 21.75 25.6949 21.75 25.4999C21.75 25.3049 21.795 25.1099 21.87 24.9299C21.945 24.7349 22.05 24.5699 22.185 24.4349C22.53 24.0899 23.055 23.9249 23.535 24.0299C23.64 24.0449 23.73 24.0748 23.82 24.1198C23.91 24.1498 24 24.1949 24.09 24.2549C24.165 24.2999 24.24 24.3749 24.315 24.4349C24.585 24.7199 24.75 25.1099 24.75 25.4999C24.75 25.8899 24.585 26.2799 24.315 26.5649C24.03 26.8349 23.64 26.9999 23.25 26.9999Z" fill="#002FD3"/>
                        <path d="M30.75 14.7598H5.25C4.635 14.7598 4.125 14.2498 4.125 13.6348C4.125 13.0198 4.635 12.5098 5.25 12.5098H30.75C31.365 12.5098 31.875 13.0198 31.875 13.6348C31.875 14.2498 31.365 14.7598 30.75 14.7598Z" fill="#002FD3"/>
                        <path d="M24 34.125H12C6.525 34.125 3.375 30.975 3.375 25.5V12.75C3.375 7.275 6.525 4.125 12 4.125H24C29.475 4.125 32.625 7.275 32.625 12.75V25.5C32.625 30.975 29.475 34.125 24 34.125ZM12 6.375C7.71 6.375 5.625 8.46 5.625 12.75V25.5C5.625 29.79 7.71 31.875 12 31.875H24C28.29 31.875 30.375 29.79 30.375 25.5V12.75C30.375 8.46 28.29 6.375 24 6.375H12Z" fill="#002FD3"/>
                    </svg>
                    {{ form.date(class="today", id="date-picker")}}
                    <div id="cal1" style="display:none;"></div>
                </div>
            </div>
            <div class="push60 hidden-xss"></div>
            <div class="push40 visible-xss"></div>
            <div id="calendar"></div>
            <div class="code-wrapper">
                <div class="form-group">
                    {{ form.number.label(class="label", for="number") }}
                    {{ form.number(type="text", class="form-control", id="number") }}
                </div>
                <div class="form-group">
                    {{ form.status.label(class="label", for="status") }}
                    {{ form.status(type="text", class="form-control select-styler", id="status") }}
                </div>
                <div class="form-group">
                    {{ form.problem.label(class="label", for="problem") }}
                    {{ form.problem(type="text", class="form-control", id="problem") }}
                </div>
                <div class="form-group">
                    <div class="push20 visible-xss"></div>
                    <div class="file-input fileInput" id="fileInputWrap">
                        <input type="file" id="fileInput"  accept="image/jpeg,image/png,image/gif" name="fileInput[]" />
                        {{ form.image(type="file", id="fileInput", accept="image/jpeg,image/png,image/gif")}}
                        <label for="fileInput">
                            <svg width="52" height="52" viewBox="0 0 52 52" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19.4998 23.2917C16.2065 23.2917 13.5415 20.6267 13.5415 17.3333C13.5415 14.04 16.2065 11.375 19.4998 11.375C22.7932 11.375 25.4582 14.04 25.4582 17.3333C25.4582 20.6267 22.7932 23.2917 19.4998 23.2917ZM19.4998 14.625C18.0048 14.625 16.7915 15.8383 16.7915 17.3333C16.7915 18.8283 18.0048 20.0417 19.4998 20.0417C20.9948 20.0417 22.2082 18.8283 22.2082 17.3333C22.2082 15.8383 20.9948 14.625 19.4998 14.625Z" fill="#292D32"/>
                                <path d="M32.5002 49.2916H19.5002C7.73516 49.2916 2.7085 44.2649 2.7085 32.4999V19.4999C2.7085 7.73492 7.73516 2.70825 19.5002 2.70825H28.1668C29.0552 2.70825 29.7918 3.44492 29.7918 4.33325C29.7918 5.22159 29.0552 5.95825 28.1668 5.95825H19.5002C9.51183 5.95825 5.9585 9.51159 5.9585 19.4999V32.4999C5.9585 42.4883 9.51183 46.0416 19.5002 46.0416H32.5002C42.4885 46.0416 46.0418 42.4883 46.0418 32.4999V21.6666C46.0418 20.7783 46.7785 20.0416 47.6668 20.0416C48.5552 20.0416 49.2918 20.7783 49.2918 21.6666V32.4999C49.2918 44.2649 44.2652 49.2916 32.5002 49.2916Z" fill="#292D32"/>
                                <path d="M46.0417 12.4583H34.125C33.2367 12.4583 32.5 11.7216 32.5 10.8333C32.5 9.94492 33.2367 9.20825 34.125 9.20825H46.0417C46.93 9.20825 47.6667 9.94492 47.6667 10.8333C47.6667 11.7216 46.93 12.4583 46.0417 12.4583Z" fill="#292D32"/>
                                <path d="M40.0835 18.4167C39.1952 18.4167 38.4585 17.68 38.4585 16.7917V4.875C38.4585 3.98667 39.1952 3.25 40.0835 3.25C40.9718 3.25 41.7085 3.98667 41.7085 4.875V16.7917C41.7085 17.68 40.9718 18.4167 40.0835 18.4167Z" fill="#292D32"/>
                                <path d="M5.7845 42.6834C5.2645 42.6834 4.7445 42.4234 4.44116 41.9684C3.94283 41.2317 4.13783 40.2134 4.8745 39.715L15.5562 32.5434C17.8962 30.9834 21.1245 31.1567 23.2478 32.955L23.9628 33.5834C25.0462 34.515 26.8878 34.515 27.9495 33.5834L36.9628 25.8484C39.2812 23.8767 42.8778 23.8767 45.1962 25.8484L48.7278 28.8817C49.3995 29.4667 49.4862 30.485 48.9012 31.1784C48.3162 31.85 47.2978 31.9367 46.6045 31.3517L43.0728 28.3184C41.9895 27.3867 40.1478 27.3867 39.0862 28.3184L30.0728 36.0534C27.7762 38.025 24.1578 38.025 21.8395 36.0534L21.1245 35.425C20.1278 34.58 18.4812 34.4934 17.3762 35.2517L6.71616 42.4234C6.41283 42.5967 6.08783 42.6834 5.7845 42.6834Z" fill="#292D32"/>
                            </svg>
                            Добавить фото заявки
                        </label>
                    </div>
                </div>
            </div>
            <div class="push50 hidden-xss"></div>
            <div class="push20 visible-xss"></div>
            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    {% for message in messages %}
                        <div class="label" style="color:gray">{{ message }}</div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            <div class="push50 hidden-xss"></div>
            <div class="push50 visible-xss"></div>
            {{ form.submit(class="button")}}
            <div class="push100 hidden-xss"></div>
            <div class="push50 visible-xss"></div> 
        </form>	
    </div>
</section>
{% endblock %}


{% block Scripts %}
<script src='js/calendar.js'></script>
	<script>
		var input = document.getElementById('date-picker');
		var divCal1 = document.getElementById('cal1');
		var cal1 = new calendar(divCal1, {
			onDayClick: function(date){
				input.value = date.toLocaleDateString();
				cal1.clearSelection(date);
				cal1.selectDate(date);
				divCal1.style.display= 'none';
			}
		});
		input.addEventListener('focus', function(){
			divCal1.style.display= 'block';
		});
		$(document).mouseup( function(e){ // событие клика по веб-документу
			var div = $( "#cal1" ); // тут указываем ID элемента
			if ( !div.is(e.target) // если клик был не по нашему блоку
				&& div.has(e.target).length === 0 
				&& !$('#date-picker').is(e.target) ) { // и не по его дочерним элементам
				div.hide(); // скрываем его
			}
		});
	</script>
{% endblock %}